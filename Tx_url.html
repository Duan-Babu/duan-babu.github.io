<!DOCTYPE html>
<html>
<head>
    <title>æå…‰åˆ†äº«å§¬</title>
    <link rel="icon" href="https://www.bilibili.com/favicon.ico?v=1" />
    <link rel="stylesheet" href="https://cdn.staticfile.org/mdui/1.0.2/css/mdui.min.css" />
    <link rel="stylesheet" href="https://cdn.staticfile.org/limonte-sweetalert2/11.6.5/sweetalert2.min.css" />
    <link rel="stylesheet" href="https://bucket.kinh.cc/CSS/MDUI.css" />
    <script src="https://cdn.staticfile.org/mdui/1.0.2/js/mdui.min.js"></script>
    <script src="https://cdn.staticfile.org/limonte-sweetalert2/11.6.5/sweetalert2.min.js"></script>
    <script src="https://cdn.staticfile.org/jquery/3.6.1/jquery.min.js"></script>
    <script src="https://cdn.staticfile.org/qrcode-generator/1.4.4/qrcode.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.7.20/dist/sweetalert2.all.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/sweetalert2@11.7.20/dist/sweetalert2.min.css" rel="stylesheet">

    <style>
        body {
            background-color: #eef1f5;
        }
    </style>
</head>
<body class="mdui-appbar-with-toolbar mdui-theme-primary-indigo mdui-theme-accent-indigo">
    <header class="mdui-appbar mdui-appbar-fixed">
        <div class="mdui-toolbar mdui-color-theme">
            <button mdui-drawer="{target:'#MainDrawer'}" class="mdui-btn mdui-btn-icon" mdui-tooltip="{content:'èœå•'}">
                <i class="mdui-icon material-icons">menu</i>
            </button>

            <a href="./" class="mdui-typo-headline" mdui-tooltip="{content:'ç‚¹å‡»è·³è½¬åˆ°æå…‰åˆ†äº«å§¬ä»‹ç»é¡µé¢'}">æå…‰åˆ†äº«å§¬</a>
        </div>
    </header>
    <div class="mdui-drawer mdui-drawer-close" id="MainDrawer">
        <div class="mdui-list">
            <a id="ToggleHome" class="mdui-list-item" style="border-radius: 0px">
                <i class="mdui-list-item-icon mdui-icon material-icons mdui-text-color-indigo">home</i>
                <div class="mdui-list-item-content">é¦–é¡µ</div>
            </a>

            <a id="ToggleAPPS" class="mdui-list-item" style="border-radius: 0px">
                <i class="mdui-list-item-icon mdui-icon material-icons mdui-text-color-green">apps</i>
                <div class="mdui-list-item-content">è½¯ä»¶ä¸‹è½½</div>
            </a>

            <a id="ToggleWeb" class="mdui-list-item" style="border-radius: 0px">
                <i class="mdui-list-item-icon mdui-icon material-icons mdui-text-color-brown">web</i>
                <div class="mdui-list-item-content">ç½‘é¡µç‰ˆ</div>
            </a>

            <a id="ToggleTutorial" class="mdui-list-item" style="border-radius: 0px">
                <i class="mdui-list-item-icon mdui-icon material-icons mdui-text-color-deep-purple">book</i>
                <div class="mdui-list-item-content">æ•™ç¨‹</div>
            </a>

            <div class="mdui-divider"></div>

            <a id="ToggleGroup" class="mdui-list-item" style="border-radius: 0px">
                <i class="mdui-list-item-icon mdui-icon material-icons mdui-text-color-blue">person_add</i>
                <div class="mdui-list-item-content">äº¤æµç¾¤</div>
            </a>

            <div class="mdui-divider"></div>

            <a id="ToggleTOS" class="mdui-list-item" style="border-radius: 0px">
                <i class="mdui-list-item-icon mdui-icon material-icons mdui-text-color-teal">import_contacts</i>
                <div class="mdui-list-item-content">æœåŠ¡æ¡æ¬¾</div>
            </a>

            <div class="mdui-divider"></div>

            <li class="mdui-list-item" mdui-drawer-close="{target:'#main-drawer'}" style="border-radius: 0px">
                <i class="mdui-list-item-icon mdui-icon material-icons mdui-text-color-blue-grey">chevron_left</i>
                <div class="mdui-list-item-content">æ”¶èµ·èœå•</div>
            </li>
        </div>
    </div>
    <div id="Home">
        <div class="mdui-container mdui-p-t-3">
            <div class="mdui-col">
                <div class="mdui-card">
                    <div class="mdui-card-primary">
                        <div class="mdui-card-primary-title">âœ¨æ¬¢è¿ä½¿ç”¨æå…‰åˆ†äº«å§¬~( â€¢Ì€ Ï‰ â€¢Ì )âœ§</div>
                        <div class="mdui-card-primary-subtitle">ğŸš«ä»¥ä¸‹å†…å®¹æ¥è‡ªè…¾è®¯è§†é¢‘ï¼Œç¦æ­¢è½¬è½½å’Œä¸‹è½½</div>  
                        <div class="mdui-card-primary-subtitle" id="url">âŒå½“å‰ä¸ºurlåˆ†äº«æ¨¡å¼ï¼Œurlå·ä¸ºç©ºï¼Œæ— æ³•è§£æï¼è¯·è”ç³»åˆ†äº«è€…å¤„ç†</div> 
                    </div>
                </div>
                <br>
                <div class="mdui-card">
                    <video id="video" controls="controls" class="mdui-video-fluid"></video>
                </div>
            </div>
        </div>
    </div>
    
    <div style="height: 68px"></div>
    <footer class="mdui-typo" style="left: 0px">
        <p>2023 ç”± <a style="font-weight: 600" href="https://babu.fanmao.pro">Babu</a> å¼€å‘ï¼ŒAPIæ”¯æŒ <a style="font-weight: 600" href="https://xiaoapi.cn/">æ…•å</a>ï¼Œç‰ˆæƒå½’ <a style="font-weight: 600" href="https://v.qq.com">è…¾è®¯è§†é¢‘</a> æ‰€æœ‰ </p>
    </footer>
  <script>
    // è·å–åœ°å€æ ä¸­çš„é“¾æ¥å‚æ•°
    function getUrlParameter() {
        var url = window.location.href; // è·å–å½“å‰é¡µé¢çš„URL
        var startIndex = url.indexOf('?url=') + 5; // æ‰¾åˆ° '?url=' çš„ä½ç½®ï¼ŒåŠ ä¸Šé•¿åº¦ 5ï¼Œå³ä¸ºæˆªå–çš„èµ·å§‹ä½ç½®
        var result = url.substring(startIndex, url.length); // ä½¿ç”¨ substring æ–¹æ³•è¿›è¡Œæˆªå–
        console.log(result); // è¾“å‡ºæˆªå–çš„ç»“æœ
        const str_url = result;
        if (str_url) {
            // æ‰§è¡Œç›¸åº”çš„ä»£ç 
            document.getElementById('url').textContent='âœ”ï¸å½“å‰ä¸ºurlåˆ†äº«æ¨¡å¼ [' + str_url +']';
        } 
        return {
            str_url: str_url ? decodeURIComponent(str_url) : '',
        };
    }

    // æ„å»ºè¯·æ±‚å¤´
    const headersHome = new Headers();
    headersHome.append('Referer', 'https://xiaoapi.cn/');

    // æ„å»ºè¯·æ±‚é…ç½®
    const requestConfigHome = {
        method: 'GET', // å¦‚æœæ˜¯getæ–¹å¼çš„è¯ï¼Œåªèƒ½æŠŠå‚æ•°æ‹¼æ¥åœ¨urlé‡Œä¼ è¿‡å»ï¼Œgetæ–¹å¼ä¸èƒ½æœ‰body
        "Access-Control-Allow-Origin" : "*",
        "Access-Control-Allow-Credentials" : true,
        headers: {
            'Content-Type': 'application/json'
        },
    };

    // ä¸‹è½½ JSON æ•°æ®å¹¶è§£æå…¶ä¸­çš„ URL
    function downloadAndParseJson(url) {
      fetch(url,requestConfigHome)
        .then(response => response.json())
        .then(data => {
          const videoUrl = data.url;
          playVideo(videoUrl);
        })
        .catch(error => console.error('Error:', error));
    }

    // æ’­æ”¾è§†é¢‘
    function playVideo(videoUrl) {
      const video = document.getElementById('video');
      video.src = videoUrl;
      video.play();
    }

    // ä¸»å‡½æ•°
    function main() {
    Swal.fire(
        'ğŸ”’è®¿é—®å—é™',
        'éƒ¨åˆ†æµè§ˆå™¨ä¸æ”¯æŒRefererï¼Œå»ºè®®åœ¨è°·æ­Œæµè§ˆå™¨å†…ä½¿ç”¨<br>âš ï¸è¯·åœ¨æµè§ˆå™¨è®¿é—®',
        'info'
    )
      const urlParameter = getUrlParameter();
      if (urlParameter) {
        const url = 'https://xiaoapi.cn/API/jx_tx2.php?url=' + urlParameter.str_url;
        downloadAndParseJson(url);
      } else {
        console.error('URL å‚æ•°ç¼ºå¤±');
      }
    }

    // æ‰§è¡Œä¸»å‡½æ•°
    main();
  </script>
</body>
</html>